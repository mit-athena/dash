/*
 *  Imakefile for Athena Dashboard
 *  Copyright (c) 1991, Massachusetts Institute of Technology
 *		
 *   $Source: /afs/dev.mit.edu/source/repository/athena/bin/dash/src/console/Imakefile,v $
 *   $Author: cfields $ 
 *
 * Copyright 1990, 1991 by the Massachusetts Institute of Technology. 
 *
 * For copying and distribution information, please see the file
 * <mit-copyright.h>. 
 *
 */

#include "../Xj.defs"

#include "mit-copyright.h"

CONSOLE		=	console

#if defined(MacIIArchitecture)
M_LIB		=	-lmalloc
#else
M_LIB		=
#endif

SRCS		=	console.c
OBJS		=	console.o

XJLIB		=	../lib/libXj.a
C_LIBS		=	${LOCAL_LIBS} ${XJLIB} ${XLIB} ${M_LIB}

#if (HasPutenv)
PUTENV_DEF      =       -DHAS_PUTENV
#else
PUTENV_DEF      =
#endif

#if defined(AIXArchitecture)
DEFINES         =       ${PUTENV_DEF} \
                        -D_BSD -D_BSD_INCLUDES -DAIX_ARCH
#else
DEFINES         =       ${PUTENV_DEF}
#endif

INCLUDES	=	-I.. ${LOCAL_INCLUDES}

AllTarget(${CONSOLE})
NormalProgramTarget($(CONSOLE),$(OBJS),$(XJLIB),,$(C_LIBS))
InstallProgram($(CONSOLE),$(DESTDIR)$(CONSOLE_BIN_DIR))

InstallNonExec(${CONSOLE}.8,${DESTDIR}${MAN_DIR}/man8/${CONSOLE}.8)
InstallNonExec(Console,${DESTDIR}${CONSOLE_APP_DIR}/Console)
InstallNonExec(console.xbm,${DESTDIR}${CONSOLE_XBM_DIR}/console.xbm)
InstallNonExec(gray,${DESTDIR}${CONSOLE_XBM_DIR}/gray)

DependTarget()

/* .c.o:
 *	${CC} ${CFLAGS} -E $*.c | xstr -c -
 *	${CC} ${CFLAGS} -c x.c
 *	mv x.o $*.o
 *	${RM} x.c
 *
 *xs.o:
 *	xstr
 *	${CC} ${CFLAGS} -c xs.c
 */
