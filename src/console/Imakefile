/*
 *  Imakefile for Athena Dashboard
 *  Copyright (c) 1991, Massachusetts Institute of Technology
 *		
 *   $Source: /afs/dev.mit.edu/source/repository/athena/bin/dash/src/console/Imakefile,v $
 *   $Author: ghudson $ 
 *
 * Copyright 1990, 1991 by the Massachusetts Institute of Technology. 
 *
 * For copying and distribution information, please see the file
 * <mit-copyright.h>. 
 *
 */

#include "../Xj.defs"

#include "mit-copyright.h"

CONSOLE		=	console

#if defined(MacIIArchitecture)
M_LIB		=	-lmalloc
#else
M_LIB		=
#endif

SRCS		=	console.c
OBJS		=	console.o

XJLIB		=	../lib/libXj.a
#ifdef SunArchitecture
OS_LIBS		=	-lbsd
#endif
C_LIBS		=	${LOCAL_LIBS} ${XJLIB} ${XLIB} ${M_LIB} ${OS_LIBS}

DEFINES         =       ${G_DEFINES}

INCLUDES	=	-I../lib ${LOCAL_INCLUDES}

#ifdef SGIArchitecture
DEFGEOM=630x207-0+30
#else
DEFGEOM=539x207-0+30
#endif

Console:	Console.presed
		rm -f Console
		sed -e "s/GEOMETRY/${DEFGEOM}/" Console.presed > Console

AllTarget(${CONSOLE})
NormalProgramTarget($(CONSOLE),$(OBJS),$(XJLIB),,$(C_LIBS))
InstallProgram($(CONSOLE),$(CONSOLE_BIN_DIR))

InstallNonExecFile(${CONSOLE}.8,${MAN_DIR}/man8)
InstallNonExecFile(Console,${CONSOLE_APP_DIR})
InstallNonExecFile(console.xbm,${CONSOLE_XBM_DIR})
InstallNonExecFile(gray,${CONSOLE_XBM_DIR})

DependTarget()

/* .c.o:
 *	${CC} ${CFLAGS} -E $*.c | xstr -c -
 *	${CC} ${CFLAGS} -c x.c
 *	mv x.o $*.o
 *	${RM} x.c
 *
 *xs.o:
 *	xstr
 *	${CC} ${CFLAGS} -c xs.c
 */
