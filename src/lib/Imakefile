/*
 *  Imakefile for Athena Dashboard
 *  Copyright (c) 1991, Massachusetts Institute of Technology
 *		
 *   $Source: /afs/dev.mit.edu/source/repository/athena/bin/dash/src/lib/Imakefile,v $
 *   $Author: vanharen $ 
 *
 * Copyright 1990, 1991 by the Massachusetts Institute of Technology. 
 *
 * For copying and distribution information, please see the file
 * <mit-copyright.h>. 
 *
 */

#include "../Xj.defs"

#include "mit-copyright.h"

SINTABLE	=	sintable

#if defined(HaveShapeExtension)
SHAPE_DEF	=	-DSHAPE
#else /* HaveShapeExtension */
SHAPE_DEF	=
#endif

#if defined(AIXArchitecture) || defined(NeedStrcasecmp)
STRCASEOBJS	=	strcasecmp.o
STRCASE_C	=	strcasecmp.c
#else
STRCASEOBJS	=
STRCASE_C	=
#endif

#if defined(RtArchitecture) \
  || (defined(VaxArchitecture) && !defined(UltrixArchitecture)) \
  || defined(NeedVsprintf)
VSPRINTFOBJS	=	vsprintf.o
VSPRINTF_C	=	vsprintf.c
#else
VSPRINTFOBJS	=
VSPRINTF_C	=
#endif

STR_OBJS	=	StrToBool.o StrToDirect.o StrToJust.o \
			StrToOrient.o StrToPixmap.o StrToXColor.o \
			StrToXFont.o
STR_C		=	StrToBool.c StrToDirect.c StrToJust.c \
			StrToOrient.c StrToPixmap.c StrToXColor.c \
			StrToXFont.c

LABEL_OBJS	=	Label.o
LABEL_SRCS	=	Label.c
LABEL_HDRS	=	Label.h
NLABEL_OBJS	=	NLabel.o SmplLabel.o
NLABEL_SRCS	=	NLabel.c SmplLabel.c
NLABEL_HDRS	=	NLabel.h SmplLabel.h

L_OBJS		=	${LABEL_OBJS}
L_SRCS		=	${LABEL_SRCS}
L_HDRS		=	${LABEL_HDRS}

OBJS		=	AClock.o Arrow.o Button.o DClock.o Drawing.o \
			Form.o Jets.o ${L_OBJS} Menu.o ScrollBar.o \
			TextDisplay.o Tree.o Window.o \ 
			hash.o registerCB.o xselect.o warn.o \
			VaCreateJet.o \
			${STR_OBJS} ${VSPRINTFOBJS} ${STRCASEOBJS}
SRCS		=	AClock.c Arrow.c Button.c DClock.c Drawing.c \
			Form.c Jets.c ${L_SRCS} Menu.c ScrollBar.c \
			TextDisplay.c Tree.c Window.c \ 
			hash.c registerCB.c xselect.c warn.c \
			VaCreateJet.c \
			${STR_C} ${VSPRINTF_C} ${STRCASE_C}
HEADERS		=	AClock.h Arrow.h Button.h DClock.h Drawing.h \
			Form.h Jets.h ${L_HDRS} Menu.h ScrollBar.h \
			TextDisplay.h Tree.h Window.h \
			hash.h xselect.h warn.h

SIN_OBJS	=	sintable.o

NOTUSED		=	Icon.c StripChart.c get_load.c get_cpu.c List.c

SIN_LIBS	=	-lm

#ifdef MacIIArchitecture
#if  defined(UltrixArchitecture) \
  || defined(AIXArchitecture) \
  || defined(MacIIArchitecture) \
  || defined(SunArchitecture)
ERRNO_DEF       =       -DNEED_ERRNO_DEFS
#else
ERRNO_DEF       =
#endif

MAC_DEF		=	-DMAC_ARCH
#else
MAC_DEF		=
#endif

#ifdef SunArchitecture
SUN_DEF		=	-DSUN_ARCH
#else
SUN_DEF		=
#endif

#ifdef VaxArchitecture
VAX_DEF		=	-DVAX_ARCH
#else
VAX_DEF		=
#endif

#ifdef AIXArchitecture
AIX_DEF		=	-DAIX_ARCH
#else
AIX_DEF		=
#endif

#ifdef RsArchitecture
RS_DEF		=	-DRS_ARCH
#else
RS_DEF		=
#endif

#ifdef PS2Architecture
PS2_DEF		=	-DPS2_ARCH
#else
PS2_DEF		=
#endif

#ifdef MipsArchitecture
MIPS_DEF	=	-DMIPS_ARCH
#else
MIPS_DEF	=
#endif

#ifdef UltrixArchitecture
ULTRIX_DEF	=	-DULTRIX_ARCH
#else
ULTRIX_DEF	=
#endif

#ifdef RtArchitecture
RT_DEF		=	-D_BSD -D_BSD_INCLUDES -DRT_ARCH
#else
RT_DEF		=
#endif

DEFINES		=	${SHAPE_DEF} ${ERRNO_DEF} \
			${MAC_DEF} ${SUN_DEF} ${VAX_DEF} ${AIX_DEF} ${RS_DEF} \
			${PS2_DEF} ${MIPS_DEF} ${ULTRIX_DEF} ${RT_DEF} \
			-DAPPDEFDIR=\"${XJ_APP_DIR}\" \
			-DBITMAPDIR=\"${XJ_XBM_DIR}\"



all::	sintable.h

NormalLibraryTarget(Xj,${OBJS})
#if defined(InstallXj)
InstallLibrary(Xj,${XJ_LIB_DIR})
#endif

BuildIncludes($(HEADERS),Xj,..)
#if defined(InstallXj)
MakeDirectories(install,$(XJ_INC_DIR)/Xj)
InstallMultiple($(HEADERS),$(XJ_INC_DIR)/Xj)
#endif


NormalProgramTarget(${SINTABLE},${SIN_OBJS},,,${SIN_LIBS})

depend:: sintable.h
depend:: includes

DependTarget()

sintable.h: ${SINTABLE}
	${RM} $@
	./${SINTABLE} > $@

clean::
	${RM} sintable.h
	${RM} strings
	${RM} x.c

/* .c.o:
 *	${CC} ${CFLAGS} -E $*.c | xstr -c -
 *	${CC} ${CFLAGS} -c x.c
 *	mv x.o $*.o
 *	${RM} x.c
 *
 *xs.o:
 *	xstr
 *	${CC} ${CFLAGS} -c xs.c
 */
